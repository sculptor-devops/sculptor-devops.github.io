(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{357:function(e,t,s){"use strict";s.r(t);var a=s(43),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"security"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security"}},[e._v("#")]),e._v(" Security")]),e._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#preface"}},[e._v("Preface")])]),s("li",[s("a",{attrs:{href:"#ports-and-ssh"}},[e._v("Ports and SSH")])]),s("li",[s("a",{attrs:{href:"#users"}},[e._v("Users")])]),s("li",[s("a",{attrs:{href:"#privileged-queue"}},[e._v("Privileged Queue")])]),s("li",[s("a",{attrs:{href:"#mysql"}},[e._v("MySql")])]),s("li",[s("a",{attrs:{href:"#redis"}},[e._v("Redis")])]),s("li",[s("a",{attrs:{href:"#supervisor"}},[e._v("Supervisor")])]),s("li",[s("a",{attrs:{href:"#api"}},[e._v("API")])]),s("li",[s("a",{attrs:{href:"#security-updates"}},[e._v("Security Updates")])]),s("li",[s("a",{attrs:{href:"#encryption"}},[e._v("Encryption")])])])]),s("p"),e._v(" "),s("h2",{attrs:{id:"preface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#preface"}},[e._v("#")]),e._v(" Preface")]),e._v(" "),s("p",[e._v("This model is what we aim for the 1.0 version of the Sculptor Devops System, will be implemented completely when main modules reach the stable beta release stage. This model can be customized using service config files, but the correct behavior is reach with this model.")]),e._v(" "),s("h2",{attrs:{id:"ports-and-ssh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ports-and-ssh"}},[e._v("#")]),e._v(" Ports and SSH")]),e._v(" "),s("p",[e._v("The list of port opened are simple "),s("strong",[e._v("http")]),e._v(", "),s("strong",[e._v("https")]),e._v(" and "),s("strong",[e._v("ssh")]),e._v(" ports, initially ssh login is available for root user this due to the fact that some provider use this kind of authentication; if yo want you can rmeove the access tho this user and use ubuntu or anothe one. Remember that authentication is monitored by "),s("strong",[e._v("fail2ban")]),e._v(" service that firewall all user that hammer this specific port. The sculptor agend is listening on "),s("strong",[e._v("9443")]),e._v(" port to separate applications and for a more scan proof configuration.")]),e._v(" "),s("h2",{attrs:{id:"users"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#users"}},[e._v("#")]),e._v(" Users")]),e._v(" "),s("p",[e._v("In the default installation there are three different users that come into play, "),s("strong",[e._v("www-data")]),e._v(", "),s("strong",[e._v("www")]),e._v(" and "),s("strong",[e._v("sculptor")]),e._v(". The first one, "),s("strong",[e._v("www-data")]),e._v(", is the default Ubuntu user to serve http requests, is used for Sculptor Agent that is a Laravel Application. The second one, "),s("strong",[e._v("www")]),e._v(", is created with no shell access and serve the pool of the web sites, all data are located in "),s("strong",[e._v("/home/www")]),e._v(". The third is the privileged sculptor uses and isa a sudoer with no shell access, is used to serve system call that need elevete privilege.")]),e._v(" "),s("h2",{attrs:{id:"privileged-queue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#privileged-queue"}},[e._v("#")]),e._v(" Privileged Queue")]),e._v(" "),s("p",[e._v("The agent spawn two services with different level of privileges, the first run with "),s("strong",[e._v("www-data")]),e._v(" (the same as the api) to run unprivileged operations such as notications or monitoring. Elevated privileges run under "),s("strong",[e._v("sculptor")]),e._v(" privileged user, this queue communicate with the agent with a queue worker so api agent is isolated from privileged queue.")]),e._v(" "),s("h2",{attrs:{id:"mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[e._v("#")]),e._v(" MySql")]),e._v(" "),s("p",[e._v("The database root password is stored in the sulptor privileged user home to let the queue work with the database, no other process can access or manage databases. Every database user created have only access to its own database and cannot share access to other datas.")]),e._v(" "),s("h2",{attrs:{id:"redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[e._v("#")]),e._v(" Redis")]),e._v(" "),s("p",[e._v("Thi service is installed to provide queue management and caching, is a key/value database; is not secured with password but security is granted by hash keys.")]),e._v(" "),s("h2",{attrs:{id:"supervisor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#supervisor"}},[e._v("#")]),e._v(" Supervisor")]),e._v(" "),s("p",[e._v("Every site can define its own queue that run under supervisor, the user that run this process is the same of the sites pool.")]),e._v(" "),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[e._v("#")]),e._v(" API")]),e._v(" "),s("p",[e._v("The model does allow crud operations on domains and database entity but will not access directly to the domains data such as db or files, this to maintain an elevate grade of isolation. Authentication is provided by "),s("strong",[e._v("JWT")]),e._v(" token.")]),e._v(" "),s("h2",{attrs:{id:"security-updates"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-updates"}},[e._v("#")]),e._v(" Security Updates")]),e._v(" "),s("p",[e._v("System security updates are run by the system autonomously, only unattended security updates are run, other upgrades must be provided manually to have less breaking changs as possible.")]),e._v(" "),s("h2",{attrs:{id:"encryption"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#encryption"}},[e._v("#")]),e._v(" Encryption")]),e._v(" "),s("p",[e._v("Every data that need encryptions, where not specified, is dove using "),s("strong",[e._v("Crypt")]),e._v(" facade so under the hood the app key is used, keep it safe.")])])}),[],!1,null,null,null);t.default=r.exports}}]);